#pragma once

#include "target/artnetnode/target.h"

#define STM32_GPIO_CONFIG \
{ \
    GPIO_CONFIG_PORT( /* PORTA */ \
        /* PA 0 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* unmapped */ \
        /* PA 1 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* ETH_RMII_REF_CLK */ \
        /* PA 2 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_UP, false, /* ETH_MDIO */ \
        /* PA 3 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* USART2_RX */ \
        /* PA 4 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* unmapped */ \
        /* PA 5 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* unmapped */ \
        /* PA 6 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* unmapped */ \
        /* PA 7 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* ETH_RMII_CRS_DV */ \
        /* PA 8 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* unmapped */ \
        /* PA 9 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, true, /* USART1_TX */ \
        /* PA10 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* USART1_RX */ \
        /* PA11 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* OTG_FS_DM */ \
        /* PA12 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* OTG_FS_DP */ \
        /* PA13 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* SWDIO */ \
        /* PA14 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* SWCLK */ \
        /* PA15 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* IRQ */ \
    ), \
    GPIO_CONFIG_PORT( /* PORTB */ \
        /* PB 0 */ GPIO::MODE_OUTPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* DMX4 OE */ \
        /* PB 1 */ GPIO::MODE_OUTPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* DMX3 OE */ \
        /* PB 2 */ GPIO::MODE_OUTPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* DMX1 OE */ \
        /* PB 3 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* SPI1_SCK */ \
        /* PB 4 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* SPI1_MISO */ \
        /* PB 5 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* SPI1_MOSI */ \
        /* PB 6 */ GPIO::MODE_SPECIAL, GPIO::TYPE_OPENDRAIN, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_UP, false, /* I2C1_SCL */ \
        /* PB 7 */ GPIO::MODE_SPECIAL, GPIO::TYPE_OPENDRAIN, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_UP, false, /* I2C1_SDA */ \
        /* PB 8 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* unmapped */ \
        /* PB 9 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* unmapped */ \
        /* PB10 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, true, /* USART3_TX */ \
        /* PB11 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* ETH_RMII_TX_EN */ \
        /* PB12 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* ETH_RMII_TXD0 */ \
        /* PB13 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* ETH_RMII_TXD1 */ \
        /* PB14 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* OTG_HS_DM */ \
        /* PB15 */ GPIO::MODE_SPECIAL, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* OTG_HS_DP */ \
    ), \
    GPIO_CONFIG_PORT( /* PORTC */ \
        /* PC 0 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* User button */ \
        /* PC 1 */ GPIO::MODE_OUTPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* ETH_MDC */ \
        /* PC 2 */ GPIO::MODE_OUTPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, true, /* SPI flash CS */ \
        /* PC 3 */ GPIO::MODE_OUTPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, true, /* microSD card CS */ \
        /* PC 4 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* ETH_RMII_RXD0 */ \
        /* PC 5 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_50MHZ, GPIO::PULL_NONE, false, /* ETH_RMII_RXD1 */ \
        /* PC 6 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* unmapped */ \
        /* PC 7 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* unmapped */ \
        /* PC 8 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, true, /* unmapped */ \
        /* PC 9 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, true, /* unmapped */ \
        /* PC10 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, true, /* UART4_TX */ \
        /* PC11 */ GPIO::MODE_OUTPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* DMX5 OE */ \
        /* PC12 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, true, /* UART5_TX */ \
        /* PC13 */ GPIO::MODE_OUTPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* DMX2 OE */ \
        /* PC14 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* OSC32_IN */ \
        /* PC15 */ GPIO::MODE_INPUT, GPIO::TYPE_PUSHPULL, STM32::GPIO_F1::SPEED_2MHZ, GPIO::PULL_NONE, false, /* OSC32_OUT */ \
    ), \
}

//TODO #define DMX_IN_CHANNELS 5
//TODO #define DMX_OUT_CHANNELS 4
#define DMX_IN_CHANNELS 4
#define DMX_OUT_CHANNELS 3

#define STM32_BITBANG_MDIO
#define STM32_ENABLE_SPI
#define STM32_ENABLE_ETHERNET
#define STM32_ENABLE_CRC32
#include "board/flexperiment/mini/f107/target.h"

#define SPIFLASH_SUPPORT_W25Q80BV
